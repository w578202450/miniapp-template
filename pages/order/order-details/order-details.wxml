<view class="page">
  <view class="header">
    <image class="header-bgImage" src="../../../images/public/public_order_bg.png"></image>
    <tmcnavbar titleText="订单详情"></tmcnavbar>
    <view class="paySuccess" style="margin-top: 50rpx">
      <block wx:if='{{detail.orderStatusID == 10}}'>
        <block wx:if='{{detail.deliveryStatusID == 1}}'>
          <image style="width:58rpx;height:58rpx" src="../../../images/order/order_wait.png"></image>
          <text>订单已支付，等待商家发货</text>
        </block>
        <block wx:elif='{{detail.deliveryStatusID == 2 || detail.deliveryStatusID == 3}}'>
          <image style="width:58rpx;height:58rpx" src="../../../images/order/order_delivery.png"></image>
          <text>订单已发货</text>
        </block>
        
      </block>
      <block wx:elif='{{detail.orderStatusID == 2}}'>
          <image style="width:58rpx;height:58rpx" src="../../../images/order/order_cancel.png"></image>
          <text>订单已取消，未收到退款请联系客服</text>
        </block>
      
    </view>
  </view>

  <view class="content">

    <view class="person-info">
      <text>{{detail.receiverName}}  {{detail.receiverPhone}}</text>
      <view class="person-info-address">{{detail.address}}</view>
    </view>

    <view class="person-info-separator"></view>

    <view class="drugs-list">
      <view class="drugs-list-header">
        <view class="drugs-list-lineView"></view>
        <view class="drugs-list-source">药品由{{detail.deliveryMan}}为你提供</view>
      </view>
      <view class="drugs-cell" wx:for="{{rpMedicines}}" wx:for-item="item">
        <view class="drugs-cell-content">
          <!-- <image src="{{item.avatar}}"></image> -->
          <view class="drugs-cell-middle">
            <text class="drugs-cell-name">{{item.medicineName}}</text>
            <text class="drugs-cell-unit">{{item.unit}}</text>
          </view>
          <view class="drugs-cell-right">
            <text class="drugs-cell-price">¥{{item.priceSum}}</text>
            <text class="drugs-cell-num">{{item.medicineAmount}}</text>
          </view>
        </view>
        <view class="cell-info-separator"></view>
      </view>
    </view>

    <view class="separator" style="height:24rpx"></view>

    <view class="prescription-container">
      <view class="prescription-header">
        <view class="prescription-header-lineView"></view>
        <view class="prescription-header-title">处方签</view>
      </view>
      <image class="prescription-image" src="../../../images/order/order_prescription.png" bindtap="previewPrescriptionAction"></image>
      <view class="separator" style="margin-top: 25rpx"></view>
      <view class="prescription-delivery prescription-text">
        <text>配送方式：</text>
        <text>{{detail.deliveryTypeID == 0 ? "上门自取" : (detail.deliveryTypeID == 1 ? "送货上门" : "快递")}}</text>
      </view>
      <view class="separator" style="margin-left: 32rpx;margin-right: 32rpx"></view>
      <view class="prescription-delivery prescription-text">
        <text>药品金额：</text>
        <text>¥{{detail.costPrice}}</text>
      </view>
      <view class="prescription-delivery prescription-text">
        <text>支付方式：</text>
        <text>{{detail.payWay == 0 ? "定金" : (detail.payWay == 1 ? "全款" : "货到付款")}}</text>
      </view>
      <view class="prescription-delivery prescription-text">
        <text>定金金额：</text>
        <text style="color:rgba(254,88,83,1)">¥{{detail.prePrice}}</text>
      </view>
      <view class="separator"></view>
      <view style="display: flex;flex-direction: row;padding:32rpx;align-items: center">
        <text class="prescription-text" style="flex-shrink: 0">备注</text>
        <text class="prescription-text" style="margin-left:32rpx;line-height:40rpx">{{detail.remarks}}</text>
      </view>
    </view>

    <view class="separator" style="height:24rpx"></view>

    <view style="display: flex;flex-direction: column;padding:32rpx">
      <text class="other-text">订单编号：{{detail.orderID}}</text>
      <text class="other-text">创建时间：{{detail.createTime}}</text>
      <text class="other-text">付款时间：{{detail.payTime}}</text>
      <text class="other-text">发货时间：{{detail.deliveryTime}}</text>
    </view>

    <view class="separator" style="height:24rpx"></view>

    <view style="display: flex;flex-direction: row;justify-content: space-between;padding:32rpx">
      <view class="options-view" style="width:176px">
        <text>咨询医生</text>
      </view>
      <view class="options-view" style="width:232px;margin-left:10rpx">
        <text>拨打客服电话</text>
      </view>
      <view class="options-view" style="width:176px;margin-left:10rpx">
        <text>取消订单</text>
      </view>
    </view>

  </view>
</view>