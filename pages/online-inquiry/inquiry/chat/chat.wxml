<view class="page">
  <!-- 顶部 -->
  <view class="middle-one">
    <view class="middleOne-box middleOne-box-one" bindtap="doctorDetailTap">
      <image src="{{talkInfo.doctorInfo.faceImage}}"/>
      <view class="info-box">
        <view class="flexRowStartCenter">
          <text class="info_one">{{talkInfo.doctorInfo.doctorName}}</text>
          <text class="info_one_one">医生</text>
        </view>
        <text class="info_two">副主任医师</text>
      </view>
    </view>
    <view class="middleOne-box" bindtap="doctorDetailTap">
      <image src="{{talkInfo.assistantInfo.faceImage}}"/>
      <view class="info-box">
        <view class="flexRowStartCenter">
          <text class="info_one">{{talkInfo.assistantInfo.doctorName}}</text>
          <text class="info_one_one">医助</text>
        </view>
        <text class="info_two">助理医师</text>
      </view>
    </view>
  </view>
  <!-- 消息列表 -->
  <scroll-view class="{{isOpenBottomBoolbar ? 'message-list-two': 'message-list'}}" scroll-into-view="{{toView}}" scroll-with-animation="true" upper-threshold="100" scroll-y="true" enable-back-to-top="true" bindtap="clickScrollViewFun">
  <!-- 空置盒子1 -->
    <view class="marginBoxOne"></view>
    <view class="row" wx:for="{{currentMessageList}}" wx:key="{{item.keyID}}" id="item{{index}}">
      <!-- 日期 -->
      <view class="datetime" wx:if="{{item.addTime}}">{{item.addTime}}</view>
      <!-- 头像与内容文本 -->
      <view class="body" style="flex-flow: {{item.personID == talkInfo.patientInfo.keyID ? 'row-reverse': 'row'}}">
        <view class="avatar-container">
          <image src="{{item.faceImage}}" class="{{item.personID == talkInfo.patientInfo.keyID ? 'avatarTwo': 'avatarOne'}}" />
        </view>
        <!-- 画对话框 -->
        <view>
          <!-- <view class="triangle" style="{{item.personID == talkInfo.patientInfo.keyID ? 'right: 140rpx; background: #7ECB4B' : 'left: 140rpx;'}}">{{item.personName}}</view> -->
          <view wx:if="{{item.personID != talkInfo.patientInfo.keyID}}" class="personNameTxt">
            {{item.personName}}
            <text wx:if="{{item.personID == talkInfo.assistantInfo.keyID}}">-助理医师</text>
            <text wx:if="{{item.personID == talkInfo.doctorInfo.keyID}}">-医生</text>
          </view>
          <!-- type: =>文本:TIM.TYPES.MSG_TEXT，图片：TIM.TYPES.MSG_IMAGE，音频：TIM.TYPES.MSG_AUDIO -->
          <!-- 文本消息 -->
          <view class="content" style="{{item.personID == talkInfo.patientInfo.keyID ? 'background: #B6D1F9' : ''}}">
            <view wx:if="{{item.type == 'TIM.TYPES.MSG_TEXT'}}">{{item.msgText}}</view>
            <image wx:elif="{{item.type == 'TIM.TYPES.MSG_IMAGE'}}" class="picture" src="{{item.imgInfo.imgUrl}}" style="width: 160rpx;height: 160rpx;" />
            <view wx:elif="{{item.type == 'TIM.TYPES.MSG_AUDIO'}}" class="flexRowStartCenter">
              <image src="../../../../images/chat/audio.png" style="height:20px;width:14px" class="payloadImage"></image>
              <view style="padding-left: 10px" class="_div data-v-71681a0a">{{item.payload.second}}s</view>
            </view>
          </view>
        </view>
      </view>
    </view>
    <!-- 空置盒子2 -->
    <view class="{{isOpenBottomBoolbar ? 'marginBoxTwoSecond': 'marginBoxTwo'}}"></view>
  </scroll-view>
  <!-- 底部菜单栏 -->
  <view class="bottomMenus">
    <view class="reply">
      <view class="opration-area">
        <image src="../../../../images/chat/voiceIcon.png" class="voiceIcon" />
        <input class="msgInput" type="text" value="{{maySendContent}}" confirm-type="send" bindinput="adInputChange" bindconfirm="sendContentMsg" bindfocus="closeBottomBoolbarFun"/>
        <image src="../../../../images/chat/inputIcon.png" class="inputIcon" />
      </view>
      <view class="send">
        <image wx:if="{{isOpenBottomBoolbar}}" src="../../../../images/chat/m-close.png" class="menusIcon" bindtap="isOpenBottomBoolbarFun"/>
        <view wx:elif="{{maySendContent.length > 0}}" bindtap="sendContentMsg">发送</view>
        <image wx:else src="../../../../images/chat/menusIcon.png" class="menusIcon" bindtap="isOpenBottomBoolbarFun"/>
      </view>
    </view>
    <view wx:if="{{isOpenBottomBoolbar}}" class="toolbarBox">
      <view wx:for="{{toolbarMenus}}" wx:key="{{item.keyID}}" class="{{item.isFifth ? 'toolbarDivFifth' : 'toolbarDiv'}}" bindtap="toolbarMenusFun" data-clickFun="{{item.clickFun}}">
        <image src="{{item.iconUrl}}" class="toolbarIcon" />
        <view class="toolbarTitile">{{item.title}}</view>
      </view>
    </view>
  </view>
</view>