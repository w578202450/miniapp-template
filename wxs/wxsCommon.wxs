/*配置WXML中可直接使用的过滤方法*/

// 过滤超过字数的加以省略，传递字符窜val，以及限制的字数num
var subStrTxt = function(val, num) {
  if (val.length == 0 || val == undefined) {
    return;
  }
  if (val.length > num) {
    return val.substring(0, num - 1) + "...";
  } else {
    return val;
  }
}

// 过滤人的名字为 张*  王**
var subName = function(val) {
  var value = val;
  if (value.length == 0 || value == undefined) {
    return;
  } else if (value.length == 1) {
    return value;
  } else if (value.length == 2){
    return value.substring(0, 1) + "*";
  } else if (value.length == 3) {
    return value.substring(0, 1) + "**";
  } else if (value.length >= 4) {
    return value.substring(0, 1) + "***";
  }
}

// 过滤时间为 年-月-日 时:分:秒
var formateDateTime = function(val) {
  if (val.length == 0 || val == undefined) {
    return;
  }
  var dateTime = getDate(val);
  var y = dateTime.getFullYear();
  var m = dateTime.getMonth() + 1;
  m = m < 10 ? ("0" + m) : m;
  var d = dateTime.getDate();
  d = d < 10 ? ("0" + d) : d;
  var h = dateTime.getHours();
  h = h < 10 ? ("0" + h) : h;
  var minute = dateTime.getMinutes();
  minute = minute < 10 ? ("0" + minute) : minute;
  var seconds = dateTime.getSeconds();
  seconds = seconds < 10 ? ("0" + seconds) : seconds;
  var dateTimes = y + "-" + m + "-" + d + " " + h + ":" + minute + ":" + seconds;
  return dateTimes;
}

// 过滤时间为 年-月-日
var formateDate = function (val) {
  if (val.length == 0 || val == undefined) {
    return;
  }
  var date = getDate(val);
  var y = date.getFullYear();
  var m = date.getMonth() + 1;
  m = m < 10 ? ("0" + m) : m;
  var d = date.getDate();
  d = d < 10 ? ("0" + d) : d;
  var dates = y + "-" + m + "-" + d;
  return dates;
}

// 过滤第一个数能否被第二个数整除
var isDivisible = function (dividend, divisor) {
  console.log(dividend % divisor === 0)
  return dividend % divisor === 0;
}

module.exports = {
  subStrTxt: subStrTxt,
  subName: subName,
  formateDateTime: formateDateTime,
  formateDate: formateDate,
  isDivisible: isDivisible
};